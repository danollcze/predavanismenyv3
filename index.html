<!DOCTYPE html>
<html lang="cs">

<head>
  <meta charset="UTF-8">
  <title>Můj Receptář</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f9f9f9;
      color: #222;
      margin: 0;
    }

    .nav {
      background: #00ff15;
      color: #fff;
      font-size: 2rem;
      font-weight: bold;
      text-align: center;
      padding: 1.2rem 0;
      letter-spacing: 1px;
      position: sticky;
      top: 0;
      z-index: 20;
    }

    main {
      max-width: 900px;
      margin: 2rem auto 1rem auto;
    }

    .add-recipe,
    .filter-recipes {
      background: #fff;
      padding: 2rem 1.5rem;
      border-radius: 1rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 16px #0001;
    }

    .add-recipe label,
    .filter-recipes label {
      display: block;
      font-weight: 600;
      margin: 1.2rem 0 0.5rem;
    }

    .add-recipe input,
    .add-recipe textarea,
    .filter-recipes input {
      width: 100%;
      font-size: 1rem;
      border: 2px solid #00ff15;
      border-radius: 0.5rem;
      padding: 0.6rem;
      margin-bottom: 1rem;
      background: #fff;
    }

    .add-recipe button {
      background: #00ff15;
      color: #fff;
      border: none;
      border-radius: 0.4rem;
      padding: 0.7rem 2.1rem;
      font-size: 1.05rem;
      cursor: pointer;
      font-weight: bold;
    }

    .add-recipe button:hover {
      background: #00cd11;
    }

    .recipe-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      /* místo auto-fit */
      gap: 1.5rem;
    }

    .recipe-card {
      background: #fff;
      border-radius: 0.6rem;
      box-shadow: 0 2px 12px #0002;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .recipe-card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .recipe-content {
      padding: 1rem 1.2rem 1rem 1.2rem;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .recipe-content h2 {
      font-size: 1.4rem;
      margin-bottom: 0.4rem;
    }

    .ingredients,
    .steps {
      margin-bottom: 0.7rem;
    }

    .ingredients ul,
    .steps ol {
      padding-left: 1.2rem;
    }

    .steps ol li,
    .ingredients ul li {
      white-space: pre-wrap;
      word-break: break-word;
    }

    .button-group {
      margin-top: auto;
      display: flex;
      gap: 0.6rem;
    }

    .edit-btn,
    .delete-btn {
      padding: 0.5rem 1.2rem;
      border: none;
      border-radius: 0.3rem;
      cursor: pointer;
      font-weight: 600;
    }

    .edit-btn {
      background: #2196f3;
      color: #fff;
    }

    .edit-btn:hover {
      background: #1479c9;
    }

    .delete-btn {
      background: #f44336;
      color: #fff;
    }

    .delete-btn:hover {
      background: #c81d16;
    }

    .pagination {
      text-align: center;
      margin: 2rem 0 3rem 0;
    }

    .pagination button {
      padding: 0.4rem 1.3rem;
      font-size: 1rem;
      border-radius: 0.3rem;
      border: none;
      background: #eee;
      margin: 0 0.5rem;
      cursor: pointer;
    }

    .pagination button:disabled {
      opacity: 0.4;
      cursor: default;
    }

    .pagination span {
      font-weight: 600;
      letter-spacing: 1px;
    }

    /* reklama po stranách */
    .reklamni-obrazek {
      position: fixed;
      top: 0;
      bottom: 0;
      width: 400px;
      background-size: cover;
      background-position: center;
      z-index: -1;
    }

    .reklamni-obrazek.left {
      left: 0;
      background-image: url('test.webp');
      /* ← nahraď svou cestou nebo URL */
    }

    .reklamni-obrazek.right {
  right: 0;
  background-image: url('test1.png');  /* Takhle to má být! */
  /* ← může být stejná nebo jiná */
}

    /* Zajištění, že střed stránky není překryt */
    body {
      margin-left: 300px;
      margin-right: 300px;
      background-color: #fdfdfd;
    }

    @media (max-width: 900px) {
  .recipe-grid {
    grid-template-columns: 1fr !important;  /* Jeden sloupec místo dvou */
    gap: 1rem;
  }
  .add-recipe, .filter-recipes, .donate-section {
    padding: 1rem 0.4rem !important;  /* Menší odsazení na mobilu */
  }
  .recipe-card {
    margin: 0 auto;
    min-width: 0;
  }
  input, textarea, button {
    font-size: 1em !important;
  }
}

      body {
        margin-left: 0;
        margin-right: 0;
      }
    }
    .donate-section { 
  text-align: center; 
  margin-bottom: 2rem; 
  background: #fff; 
  border-radius: 1rem; 
  box-shadow: 0 4px 16px #0001;
  padding: 1.3rem 1rem 1rem 1rem;
  max-width: 900px;
  margin-left: auto; margin-right: auto;
}
.donate-section h2 { margin-top: 0; margin-bottom: 1rem; }
.donate-qrs { display: flex; flex-wrap: wrap; gap: 1.2rem; justify-content: center; align-items: flex-end;}
.donate-qrs div { text-align: center; }
.qr-small {
  width: 65px; height: 65px;
  cursor: pointer;
  border-radius: 0.5rem;
  box-shadow: 0 2px 8px #0002;
  transition: transform 0.18s;
  background: #fafafa;
}
.qr-small:hover { transform: scale(1.15);}
.qr-big {
  display: block;
  margin: 0 auto;
  max-width: 90vw;
  max-height: 90vh;
  box-shadow: 0 6px 32px #0008;
  background: #fff;
  border-radius: 1rem;
}
.qr-modal {
  position: fixed; left: 0; top: 0; width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.6);
  display: flex; align-items: center; justify-content: center;
  z-index: 1100;
}
.qr-modal-overlay {
  position: absolute; left: 0; top: 0; width: 100vw; height: 100vh;
  z-index: 0;
}
#qr-modal-img { position: relative; z-index: 1; }
@media (max-width:900px) {
  .donate-qrs { gap: 0.5rem;}
  .qr-small { width: 48px; height: 48px;}
}
.donate-section,
.donate-section h2,
.donate-section .donate-note {
  text-align: center !important;
}
.donate-bg-img {
  width: 100%;
  max-width: 500px;
  height: auto;
  display: block;
  margin: 0 auto 0.5rem auto;
  border-radius: 1.1rem;
  object-fit: cover;
}
.donate-section {
  max-width: 700px;
  margin: 0 auto 1.5rem auto;
  padding: 1.2rem 0.5rem;
  box-sizing: border-box;
  background: #fff;
  border-radius: 1.1rem;
  text-align: center;
}
@media (max-width: 700px) {
  .donate-section {
    padding: 0.6rem 0.1rem 0.9rem 0.1rem;
    border-radius: 0.5rem;
  }
  .donate-bg-img {
    max-width: 100vw;
    border-radius: 0.7rem;
  }
}

  input, textarea, button {
    font-size: 1em !important;
  }
}
body {
  background: #f9f9f9;
  margin: 0;
}

main {
  max-width: 500px;
  margin: 40px auto 0 auto;
  background: #fff;
  border-radius: 1.2rem;
  box-shadow: 0 4px 20px #0001;
  padding: 2rem 1.2rem;
}

/* Pro PC */
@media (min-width: 900px) {
  main {
    max-width: 850px;
    padding: 2.5rem 2.5rem;
  }
}

/* Velké monitory */
@media (min-width: 1400px) {
  main {
    max-width: 1100px;
  }
}
.ads-bottom {
  margin: 2rem auto 3rem auto;
  max-width: 900px;
  text-align: center;
}

.ads-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1.3rem;
  justify-items: center;
  align-items: center;
}

.ads-grid img {
  width: 110px;
  height: 110px;
  object-fit: cover;
  border-radius: 12px;
  box-shadow: 0 2px 10px #0001;
  cursor: pointer;
  transition: transform 0.15s;
}

.ads-grid img:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 18px #0002;
}

/* Responsivita na menších displejích */
@media (max-width: 600px) {
  .ads-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  .ads-grid img {
    width: 95px;
    height: 95px;
  }
}
  </style>
</head>

<body>

  <div class="nav">Receptář AVE JA</div>

  <!-- LEVÝ OBRÁZKOVÝ BANNER -->
  <div class="reklamni-obrazek left"></div>

  <!-- PRAVÝ OBRÁZKOVÝ BANNER -->
  <div class="reklamni-obrazek right"></div>

<section class="donate-section">
  <h2>Podpořte/Donate provoz</h2>
  <div class="donate-qrs">
    <div>
      <img src="R100.png" alt="QR 100 Kč" class="qr-small">
      <div class="qr-popis">0,1K Kč</div>
    </div>
    <div>
      <img src="R200.png" alt="QR 200 Kč" class="qr-small">
      <div class="qr-popis">0,2K Kč</div>
    </div>
    <div>
      <img src="R300.png" alt="QR 300 Kč" class="qr-small">
      <div class="qr-popis">0,5K Kč</div>
    </div>
    <div>
      <img src="R500.png" alt="QR 500 Kč" class="qr-small">
      <div class="qr-popis">1,0K Kč</div>
    </div>
    <div>
      <img src="R1000.png" alt="QR 1000 Kč" class="qr-small">
      <div class="qr-popis">Volitelné</div>
    </div>
  </div>
  <div class="donate-note">Kliknutím na QR Kód obrázek zvětšite </div>
</section>

<!-- MODAL na zvětšený QR kód -->
<div id="qr-modal" class="qr-modal" style="display:none;">
  <div class="qr-modal-overlay"></div>
  <img id="qr-modal-img" src="" alt="QR kód" class="qr-big">
</div>

  <main>
    <section class="add-recipe">
      <form id="recipe-form" autocomplete="off">
        <label for="title">Název/Druh:</label>
        <input type="text" id="title" required placeholder="Název receptu">
        <label for="image">Obrázek (URL):</label>
        <input type="url" id="image" placeholder="https://...">
        <label for="ingredients">Ingredience/Poměr přísad (každá na nový řádek):</label>
        <textarea id="ingredients" rows="4" required placeholder="Mouka&#10;Cukr&#10;Vejce"></textarea>
        <label for="steps">Postup/Úpravy (každý krok na nový řádek):</label>
        <textarea id="steps" rows="4" required placeholder="Krok 1&#10;Krok 2"></textarea>
        <label for="cooking-time">Doba vaření (minuty):</label>
        <input type="number" id="cooking-time" min="1" placeholder="např. 40">
        <label for="portion-count">Počet porcí:</label>
        <input type="number" id="portion-count" min="1" placeholder="např. 4">
        <button type="submit" id="submit-btn">Přidat recept</button>
      </form>
    </section>

    <section class="filter-recipes">
    <h2>Vyhledávání receptu</h2>
      <label for="filter-name">Název:</label>
      <input type="text" id="filter-name" placeholder="Hledat podle názvu...">
      <label for="filter-ingredient">Ingredience:</label>
      <input type="text" id="filter-ingredient" placeholder="Hledat podle ingredience...">
    </section>

    <section class="recipe-grid" id="recipe-grid">
      <!-- Recepty -->
    </section>

    <section class="pagination">
      <button id="prev-page">Předchozí</button>
      <span id="page-info"></span>
      <button id="next-page">Další</button>
    </section>
    
    <section class="ads-bottom">
  <div class="ads-grid">
    <img src=""https://dummyimage.com/120x120/43b3fa/ffffff&text=Reklama+1"" alt="Reklama 1">
    <img src=""https://dummyimage.com/120x120/43b3fa/ffffff&text=Reklama+1"" alt="Reklama 2">
    <img src=""https://dummyimage.com/120x120/43b3fa/ffffff&text=Reklama+1"" alt="Reklama 3">
    <img src="reklama 1.jpg" alt="Reklama 4">
    <img src="reklama 2.jpg" alt="Reklama 5">
    <img src="reklama 3.jpg" alt="Reklama 6">
    <img src="ad7.jpg" alt="Reklama 7">
    <img src="ad8.jpg" alt="Reklama 8">
    <img src="ad9.jpg" alt="Reklama 9">
  </div>
</section>
  </main>
  
<script>
const HESLO_MAZANI = "recept2024";

let filterName = '', filterIngredient = '', editingIndex = null;
let currentPage = 1;
const recipesPerPage = 6;

const getRecipes = async () => {
  const res = await fetch('nacti.php');
  return res.ok ? await res.json() : [];
};

const saveRecipes = async (recs) => {
  await fetch('uloz.php', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(recs)
  });
};

function createCard(recipe, idx) {
  const article = document.createElement('article');
  article.className = 'recipe-card';
  article.innerHTML = `
    ${recipe.image ? `<img src="${recipe.image}" alt="${recipe.title}">` : ''}
    <div class="recipe-content">
      <h2>${recipe.title}</h2>
      ${recipe.cookingTime ? `<div class="cooking-time"><strong>Doba vaření:</strong> ${recipe.cookingTime} minut</div>` : ''}
      ${recipe.portionCount ? `<div class="portion-count"><strong>Počet porcí:</strong> ${recipe.portionCount}</div>` : ''}
      <div class="ingredients">
        <h3>Ingredience:</h3>
        <ul>${recipe.ingredients.map(i => `<li>${i}</li>`).join('')}</ul>
      </div>
      <div class="steps">
        <h3>Postup:</h3>
        <ol>${recipe.steps.map(s => `<li>${s}</li>`).join('')}</ol>
      </div>
      <div class="button-group">
        <button class="edit-btn">Upravit</button>
        <button class="delete-btn">Smazat</button>
      </div>
    </div>
  `;

  article.querySelector('.edit-btn')?.addEventListener('click', () => {
    document.getElementById('title').value = recipe.title;
    document.getElementById('image').value = recipe.image;
    document.getElementById('cooking-time').value = recipe.cookingTime || '';
    document.getElementById('portion-count').value = recipe.portionCount || '';
    document.getElementById('ingredients').value = recipe.ingredients.join('\n');
    document.getElementById('steps').value = recipe.steps.join('\n');
    editingIndex = idx;
    window.scrollTo({ top: 0, behavior: 'smooth' });
    document.getElementById('submit-btn').textContent = 'Uložit změny';
  });

  article.querySelector('.delete-btn')?.addEventListener('click', () => {
    const zadane = prompt("Zadej heslo pro smazání receptu:");
    if (zadane === HESLO_MAZANI) {
      getRecipes().then(arr => {
        arr.splice(idx, 1);
        saveRecipes(arr).then(() => renderRecipes());
      });
    } else if (zadane !== null) {
      alert("Nesprávné heslo!");
    }
  });

  return article;
}

async function renderRecipes() {
  const grid = document.getElementById('recipe-grid');
  if (!grid) return;
  grid.innerHTML = '';

  let arr = await getRecipes();
  if (!Array.isArray(arr)) arr = [];

  if (filterName) arr = arr.filter(r => r.title.toLowerCase().includes(filterName));
  if (filterIngredient) arr = arr.filter(r => r.ingredients.some(i => i.toLowerCase().includes(filterIngredient)));

  const totalPages = Math.max(1, Math.ceil(arr.length / recipesPerPage));
  if (currentPage > totalPages) currentPage = totalPages;
  const start = (currentPage - 1) * recipesPerPage;
  const end = start + recipesPerPage;
  const visibleRecipes = arr.slice(start, end);

  visibleRecipes.forEach((r, i) => grid.appendChild(createCard(r, start + i)));
  document.getElementById('page-info').textContent = `Stránka ${currentPage} / ${totalPages}`;
  document.getElementById('prev-page').disabled = currentPage === 1;
  document.getElementById('next-page').disabled = currentPage === totalPages;
}

document.addEventListener('DOMContentLoaded', () => {
  renderRecipes();

  document.getElementById('recipe-form')?.addEventListener('submit', async e => {
    e.preventDefault();
    const newRec = {
      title: document.getElementById('title').value.trim(),
      image: document.getElementById('image').value.trim(),
      cookingTime: document.getElementById('cooking-time').value.trim(),
      portionCount: document.getElementById('portion-count').value.trim(),
      ingredients: document.getElementById('ingredients').value.trim().split('\n').filter(x => x),
      steps: document.getElementById('steps').value.trim().split('\n').filter(x => x)
    };
    const arr = await getRecipes();
    if (editingIndex !== null) {
      arr[editingIndex] = newRec;
      editingIndex = null;
    } else {
      arr.push(newRec);
    }
    await saveRecipes(arr);
    e.target.reset();
    document.getElementById('submit-btn').textContent = 'Přidat recept';
    renderRecipes();
  });

  document.getElementById('filter-name')?.addEventListener('input', e => {
    filterName = e.target.value.trim().toLowerCase();
    currentPage = 1;
    renderRecipes();
  });

  document.getElementById('filter-ingredient')?.addEventListener('input', e => {
    filterIngredient = e.target.value.trim().toLowerCase();
    currentPage = 1;
    renderRecipes();
  });

  document.getElementById('prev-page')?.addEventListener('click', () => {
    if (currentPage > 1) {
      currentPage--;
      renderRecipes();
    }
  });

  document.getElementById('next-page')?.addEventListener('click', async () => {
    const arr = await getRecipes();
    let filtered = arr;
    if (filterName) filtered = filtered.filter(r => r.title.toLowerCase().includes(filterName));
    if (filterIngredient) filtered = filtered.filter(r => r.ingredients.some(i => i.toLowerCase().includes(filterIngredient)));
    const totalPages = Math.max(1, Math.ceil(filtered.length / recipesPerPage));
    if (currentPage < totalPages) {
      currentPage++;
      renderRecipes();
    }
  });
});
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.qr-small').forEach(img => {
    img.addEventListener('click', e => {
      document.getElementById('qr-modal-img').src = img.src;
      document.getElementById('qr-modal').style.display = 'flex';
    });
  });
  document.getElementById('qr-modal').addEventListener('click', function(e){
    if (e.target === this || e.target.classList.contains('qr-modal-overlay')) {
      this.style.display = 'none';
      document.getElementById('qr-modal-img').src = '';
    }
  });
});
</script>
</body>

</html>
